<!DOCTYPE html>
<html>
<head>
    <title>Exam Questions</title>
    <link rel="stylesheet" href="/style.css">

    <!-- MathJax -->
    <script>
        window.MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] } };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        body {
            background:#f5f5f5;
            padding:30px;
            font-family:Arial;
        }

        .container {
            background:white;
            padding:30px;
            border-radius:12px;
            max-width:1200px;
            margin:auto;
            box-shadow:0 4px 20px rgba(0,0,0,0.1);
        }

        h1 {
            text-align:center;
            margin-top:0;
            margin-bottom:20px;
        }

        table {
            width:100%;
            border-collapse:collapse;
            margin-top:20px;
        }

        th, td {
            padding:15px;
            border:1px solid #ddd;
            vertical-align:top;
            font-size:1.05em;
        }

        th {
            background:#eaeaea;
            text-align:center;
        }

        .question-box {
            font-size:1.1em;
            line-height:1.6em;
            white-space:pre-wrap; /* makes long questions readable */
        }

        .options-box div {
            margin:6px 0;
            font-size:1.05em;
        }

        img.question-img {
            max-width:350px;
            max-height:260px;
            margin-top:12px;
            border-radius:6px;
            border:1px solid #ccc;
        }

        .btn-primary {
            padding:10px 15px;
            background:#007bff;
            color:white;
            border-radius:5px;
            text-decoration:none;
        }

        .btn-secondary {
            padding:10px 15px;
            background:#6c757d;
            color:white;
            border-radius:5px;
            text-decoration:none;
        }
        .table-wrapper {
    width: 100%;
    overflow-x: auto;   /* enables horizontal scrolling if content is too wide */
    overflow-y: hidden;
}

table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed; /* prevents table from expanding beyond container */
    word-wrap: break-word;
}
table img {
    max-width: 250px;
    max-height: 200px;
    height: auto;
    object-fit: contain;
    border-radius: 6px;
    border: 1px solid #ccc;
}


    </style>
</head>

<body>

<div class="container">

    <h1>Questions – <%= exam.course_name %></h1>

    <a href="/teacher/cbt/<%= examId %>/questions/add" class="btn btn-primary">
        + Add New Question
    </a>
<div class="table-wrapper">
    
    <table>
        <tr>
            <th width="5%">S/N</th>
            <th width="50%">Question</th>
            <th width="27%">Options</th>
             <th width="6%">Correct</th>
            <th width="12%">Actions</th>

        </tr>

        <% questions.forEach((q, index) => { %>
            <tr>
                <td style="text-align:center;"><%= index + 1 %></td>

                <!-- QUESTION -->
                <td class="question-box">
                    <%= q.question %>

                    <% if (q.image) { %>
                        <br>
                        <img src="/uploads/questions/<%= q.image %>">

                    <% } %>
                </td>

                <!-- OPTIONS -->
                <td class="options-box">
                    <div><strong>A.</strong> <%= q.options[0] %></div>
                    <div><strong>B.</strong> <%= q.options[1] %></div>
                    <div><strong>C.</strong> <%= q.options[2] %></div>
                    <div><strong>D.</strong> <%= q.options[3] %></div>
                </td>

                <!-- CORRECT -->
              <td style="text-align:center; font-weight:bold; font-size:1.2em;">
    <%= q.correct_option || "?" %>
</td>



                <td style="text-align:center;">
                    <a href="/teacher/cbt/<%= examId %>/questions/<%= q.id %>/edit">Edit</a> |
                    <a href="/teacher/cbt/questions/<%= q.id %>/delete"
                       onclick="return confirm('Delete this question?')">Delete</a>
                </td>
            </tr>
        <% }) %>

    </table>
    </div>  

    <br>
    <a href="/teacher/cbt" class="btn btn-secondary">⬅ Back</a>

</div>

</body>
</html>
